(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{288:function(t,s,e){"use strict";e.r(s);var n=e(28),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"phpunit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#phpunit"}},[t._v("#")]),t._v(" PHPUnit")]),t._v(" "),e("h2",{attrs:{id:"installation-pour-symfony"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation-pour-symfony"}},[t._v("#")]),t._v(" Installation pour Symfony")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("composer require --dev symfony/phpunit-bridge")]),t._v(" installe juste phpunit")]),t._v(" "),e("li",[e("code",[t._v("composer require --dev symfony/browser-kit symfony/css-selector")]),t._v(" installe le nécessaire pour faire des tests fonctionnels")]),t._v(" "),e("li",[e("code",[t._v("composer require --dev symfony/test-pack")]),t._v(" installe tout le bazar d'un coup")]),t._v(" "),e("li",[t._v("Exécuter "),e("code",[t._v("./vendor/bin/simple-phpunit")]),t._v(" pour installer phpunit")])]),t._v(" "),e("h2",{attrs:{id:"utilisation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#utilisation"}},[t._v("#")]),t._v(" Utilisation")]),t._v(" "),e("ul",[e("li",[t._v("Pour Symfony 4\n"),e("ul",[e("li",[t._v("Exécuter "),e("code",[t._v("php bin/phpunit")])])])]),t._v(" "),e("li",[t._v("Pour Symfony 3\n"),e("ul",[e("li",[t._v("Exécuter "),e("code",[t._v("./vendor/bin/simple-phpunit")])])])]),t._v(" "),e("li",[e("code",[t._v("php bin/phpunit --verbose")]),t._v(" ou "),e("code",[t._v("-v")]),t._v(" détaille les problèmes.")]),t._v(" "),e("li",[e("code",[t._v("php bin/phpunit --coverage-html nomDossierDestination")]),t._v(" génère un rapport du coverage")]),t._v(" "),e("li",[e("code",[t._v("php bin/phpunit --filter=testNomMethodeATester")]),t._v(" exécute certains tests seulement")]),t._v(" "),e("li",[e("code",[t._v("php bin/phpunit chemin/vers/fichierATester/nomfichierOuDossier")]),t._v(" exécute les tests d'un fichier ou d'un dossier")])]),t._v(" "),e("h3",{attrs:{id:"utiliser-les-assertions-de-phpunit-ailleurs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#utiliser-les-assertions-de-phpunit-ailleurs"}},[t._v("#")]),t._v(" Utiliser les assertions de phpunit ailleurs")]),t._v(" "),e("ul",[e("li",[t._v("Utiliser les méthodes statiques de la classe "),e("code",[t._v("PHPUnit\\Framework\\Assert")])])]),t._v(" "),e("h3",{attrs:{id:"tests-fonctionnels-avec-phpunit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tests-fonctionnels-avec-phpunit"}},[t._v("#")]),t._v(" Tests fonctionnels avec phpunit")]),t._v(" "),e("ul",[e("li",[t._v("On peut visualiser la page demandée par un test en faisant un "),e("code",[t._v("echo $client->getResponse()->getContent();")]),t._v(" dans la méthode de test et en redirigeant la sortie vers un fichier "),e("code",[t._v(".html")]),t._v(" en exécutant "),e("code",[t._v("./bin/phpunit --filter nomMethodeTest > nomFichierDestination.html")])]),t._v(" "),e("li",[t._v("On peut ajouter des headers perso dans la requête en préfixant l'intitulé du header par "),e("code",[t._v("HTTP_")]),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("client")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'GET'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"/products/'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("testProduct")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"HTTP_X-AUTH-TOKEN"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"test_token"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])])}),[],!1,null,null,null);s.default=a.exports}}]);