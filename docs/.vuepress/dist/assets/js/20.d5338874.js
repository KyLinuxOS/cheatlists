(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{305:function(t,a,e){"use strict";e.r(a);var s=e(28),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"gitlab-ci-cd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-ci-cd"}},[t._v("#")]),t._v(" GitLab CI/CD")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://docs.gitlab.com/ee/ci/introduction/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Documentation"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"utilisation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#utilisation"}},[t._v("#")]),t._v(" Utilisation")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Créer un repository dans GitLab.")])]),t._v(" "),e("li",[e("p",[t._v("Créer un fichier "),e("code",[t._v(".gitlab-ci.yml")]),t._v(" à la racine du projet contenant les commandes à exécuter.")]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://docs.gitlab.com/ee/user/project/pages/getting_started_part_four.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Documentation"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("GitLab va détecter ce fichier et lancer GitLab Runner pour exécuter les commandes.")]),t._v(" "),e("p",[t._v("Exemple de fichier "),e("code",[t._v(".gitlab-ci.yml")]),t._v(" :")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("before_script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" echo 'Hello world"),e("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!'")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run-zog")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" echo 'zogzog'\n")])])])])]),t._v(" "),e("h3",{attrs:{id:"exemples-de-fichier-gitlab-ci-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exemples-de-fichier-gitlab-ci-yml"}},[t._v("#")]),t._v(" Exemples de fichier "),e("code",[t._v(".gitlab-ci.yml")])]),t._v(" "),e("ul",[e("li",[t._v("Pour lancer phpstan :"),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("phpstan")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tags")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Ce tag permet d'affecter un runner. C'est parfois nécessaire.")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" docker\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jakzal/phpqa\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tests "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Par défaut le stage est test au singulier.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" phpstan analyse "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("level 8 src tests\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("allow_failure")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optionel : pour que ce job ne soit pas bloquant")]),t._v("\n")])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);