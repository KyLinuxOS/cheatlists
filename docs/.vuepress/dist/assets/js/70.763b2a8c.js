(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{277:function(e,t,n){"use strict";n.r(t);var s=n(28),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"symfony"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#symfony"}},[e._v("#")]),e._v(" Symfony")]),e._v(" "),n("h2",{attrs:{id:"installation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://symfony.com/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("Download"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("wget https://get.symfony.com/cli/installer -O - | bash")]),e._v(" installe Symfony sous Linux.")])]),e._v(" "),n("h2",{attrs:{id:"makerbundle"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#makerbundle"}},[e._v("#")]),e._v(" MakerBundle")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://symfony.com/doc/current/bundles/SymfonyMakerBundle/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("php bin/console list make")]),e._v(" affiche les commandes possibles.")])]),e._v(" "),n("h2",{attrs:{id:"nouveau-projet"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nouveau-projet"}},[e._v("#")]),e._v(" Nouveau projet")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("composer create-project symfony/website-skeleton my_project_name")]),e._v(" créé un projet complet via composer")]),e._v(" "),n("li",[n("code",[e._v("composer create-project symfony/skeleton my_project_name")]),e._v(" créé un projet minimal via composer")]),e._v(" "),n("li",[n("code",[e._v("symfony new nameOfTheProjectHere --full")]),e._v(" créé un projet complet avec l'exécutable Symfony")]),e._v(" "),n("li",[n("code",[e._v("symfony new my_project_name --version=lts")]),e._v(" sélectionne une version en particulier")]),e._v(" "),n("li",[n("code",[e._v("symfony new nameOfTheProjectHere")]),e._v(" créé un projet minimal avec l'exécutable Symfony")])]),e._v(" "),n("h2",{attrs:{id:"problemes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#problemes"}},[e._v("#")]),e._v(" Problèmes")]),e._v(" "),n("ul",[n("li",[e._v("Faire un "),n("code",[e._v("dd($maVariable)")]),e._v(" pour débugger (dump and die)")]),e._v(" "),n("li",[e._v("404 alors que les routes sont bien annotées sur un serveur Apache\n"),n("ul",[n("li",[e._v("Installer le "),n("code",[e._v("symfony/apache-pack")])])])]),e._v(" "),n("li",[e._v("Erreur en prod et pas en dev\n"),n("ul",[n("li",[e._v("Vider le cache")]),e._v(" "),n("li",[e._v("Changer "),n("code",[e._v("$kernel = new Kernel($_SERVER['APP_ENV'], (bool) $_SERVER['APP_DEBUG']);")]),e._v(" en "),n("code",[e._v("$kernel = new Kernel($_SERVER['APP_ENV'], true);")]),e._v(" dans "),n("code",[e._v("index.php")]),e._v(" pour identifier l'erreur")])])]),e._v(" "),n("li",[e._v("On peut voir le moment où :\n"),n("ul",[n("li",[e._v("des infos sont stockés dans la session dans "),n("code",[e._v("Symfony\\Component\\HttpFoundation\\Session\\Attribute\\AttributeBag::set()")])]),e._v(" "),n("li",[e._v("les classes sont chargées dans "),n("code",[e._v("Symfony\\Component\\ClassLoader\\ClassLoader::loadClass()")])])])])]),e._v(" "),n("h2",{attrs:{id:"acceder-a-la-requete"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#acceder-a-la-requete"}},[e._v("#")]),e._v(" Accéder à la requête")]),e._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://symfony.com/doc/current/service_container/request.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc"),n("OutboundLink")],1)])]),e._v(" "),n("p",[e._v("Injecter "),n("code",[e._v("Symfony\\Component\\HttpFoundation\\RequestStack $requestStack")]),e._v(" et faire :")]),e._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$request")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$this")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),n("span",{pre:!0,attrs:{class:"token property"}},[e._v("requestStack")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("getCurrentRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),n("h2",{attrs:{id:"validation-des-donnees"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#validation-des-donnees"}},[e._v("#")]),e._v(" Validation des données")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://symfony.com/doc/current/reference/constraints.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("Utilisation"),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[e._v("Symfony"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Validator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Constraints")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("as")]),e._v(" Assert"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyAwesomeEntity")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n     * @Assert\\NomContrainte(paramètres)\n     */")]),e._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$myAwesomeProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),n("li",[e._v("Quelques annotations\n"),n("ul",[n("li",[n("code",[e._v("@Assert\\NotBlank")]),e._v(" oblige à renseigner cette attribut.\n"),n("ul",[n("li",[e._v("Exemple : "),n("code",[e._v('@Assert\\NotBlank(message="The customer\'s first name is mandatory.")')])])])]),e._v(" "),n("li",[n("code",[e._v("@Assert\\Length")]),e._v(" nécessite un nombre de caractère spécifique.\n"),n("ul",[n("li",[e._v("Exemple : "),n("code",[e._v('@Assert\\Length(min=3, max=255, minMessage="Must be greater than 2", maxMessage="Must be lower than 256")')])])])]),e._v(" "),n("li",[n("code",[e._v("@Assert\\Type")]),e._v(" nécessite un type spécifique.\n"),n("ul",[n("li",[e._v("Exemple : "),n("code",[e._v('@Assert\\Type(type="numeric", message="Must be numeric.")')])])])]),e._v(" "),n("li",[n("code",[e._v("@Assert\\DateTime")]),e._v(" nécessite un objet DateTime.")]),e._v(" "),n("li",[n("code",[e._v("@Assert\\Choice")]),e._v(" restreint les valeurs à une liste définie.\n"),n("ul",[n("li",[e._v("Exemples :\n"),n("ul",[n("li",[n("code",[e._v('@Assert\\Choice(choices={"Apple", "Banana", "Raspberry"}, message="Choose a valid choice from the list.")')]),e._v(" où on définit la liste de choix directement dans l'annotation.")]),e._v(" "),n("li",[n("code",[e._v("@Assert\\Choice(choices=FruitBasket::FRUITS)")]),e._v(" où on utilise une constante contenant un tableau PHP.")]),e._v(" "),n("li",[n("code",[e._v('@Assert\\Choice(callback={"App\\Entity\\FruitBasket", "getFruits"})')]),e._v(" où on utilise une méthode pour obtenir la liste de choix.\n"),n("ul",[n("li",[n("code",[e._v('@Assert\\Choice(callback="getFruits")')]),e._v(" si la méthode requise est présente dans l'entité.")])])])])])])]),e._v(" "),n("li",[n("code",[e._v("@UniqueEntity")]),e._v(" empêche que 2 entités soient identiques. "),n("a",{attrs:{href:"https://symfony.com/doc/current/reference/constraints.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc"),n("OutboundLink")],1)])])])]),e._v(" "),n("h2",{attrs:{id:"injecter-des-parametres-manuellement-via-la-config-et-le-fichier-env"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#injecter-des-parametres-manuellement-via-la-config-et-le-fichier-env"}},[e._v("#")]),e._v(" Injecter des paramètres manuellement via la config et le fichier .env")]),e._v(" "),n("ul",[n("li",[e._v("https://symfony.com/doc/current/service_container.html#manually-wiring-arguments")]),e._v(" "),n("li",[e._v("https://symfony.com/doc/current/configuration.html#configuration-based-on-environment-variables")])]),e._v(" "),n("p",[e._v("Exemple sur le projet 7 de la formation OpenClassrooms :")]),e._v(" "),n("p",[n("em",[e._v("Fichier "),n("code",[e._v("services.yaml")])])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("App\\EventListener\\HttpCacheListener:\n        arguments:\n            $cacheExpiration: '%env(CACHE_EXPIRATION)%'\n")])])]),n("p",[n("em",[e._v("Fichier "),n("code",[e._v(".env")])])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("CACHE_EXPIRATION='+10 minutes'\n")])])]),n("h2",{attrs:{id:"recuperer-un-utilisateur"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#recuperer-un-utilisateur"}},[e._v("#")]),e._v(" Récupérer un utilisateur")]),e._v(" "),n("ul",[n("li",[e._v("Dans un controller héritant de "),n("code",[e._v("AbstractController")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("$this->getUser()")])])])]),e._v(" "),n("li",[e._v("Via un objet "),n("code",[e._v("Symfony\\Component\\Security\\Core\\Security")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("$security->getUser()")])])])]),e._v(" "),n("li",[e._v("Via un objet implémentant "),n("code",[e._v("TokenInterface")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("$token->getUser()")])])])])]),e._v(" "),n("h2",{attrs:{id:"evenements-lances-par-le-kernel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#evenements-lances-par-le-kernel"}},[e._v("#")]),e._v(" Evénements lancés par le kernel")]),e._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://symfony.com/doc/current/reference/events.html#kernel-events",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc"),n("OutboundLink")],1)])]),e._v(" "),n("ol",[n("li",[e._v("kernel.request")]),e._v(" "),n("li",[e._v("kernel.controller")]),e._v(" "),n("li",[e._v("kernel.controller_arguments")]),e._v(" "),n("li",[e._v("kernel.view")]),e._v(" "),n("li",[e._v("kernel.response")]),e._v(" "),n("li",[e._v("kernel.finish_request")]),e._v(" "),n("li",[e._v("kernel.terminate")]),e._v(" "),n("li",[e._v("kernel.exception")])])])}),[],!1,null,null,null);t.default=r.exports}}]);