(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{259:function(e,s,t){"use strict";t.r(s);var a=t(28),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"postgresql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgresql"}},[e._v("#")]),e._v(" PostGreSql")]),e._v(" "),t("h2",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://wiki.archlinux.org/index.php/PostgreSQL",target:"_blank",rel:"noopener noreferrer"}},[e._v("Manjaro"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"lancement-du-serveur"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lancement-du-serveur"}},[e._v("#")]),e._v(" Lancement du serveur")]),e._v(" "),t("blockquote",[t("p",[e._v("Pour Manjaro exécuter : "),t("code",[e._v("systemctl start postgresql.service")]),e._v(" pour lancer le serveur et "),t("code",[e._v("systemctl enable postgresql.service")]),e._v(" pour lancer le serveur au démarrage.")])]),e._v(" "),t("ol",[t("li",[t("code",[e._v("sudo -iu postgres")]),e._v(" lance le shell.")]),e._v(" "),t("li",[t("code",[e._v("initdb -D /var/lib/postgres/data")]),e._v(" initialise le cluster de la base de données.\n"),t("ul",[t("li",[t("code",[e._v("initdb -D /var/lib/postgres/data --locale=fr_FR.UTF-8 -E UTF8")]),e._v(" pareil mais en spécifiant une locale "),t("code",[e._v("--locale=fr_FR.UTF-8")]),e._v(" et un encodage "),t("code",[e._v("-E UTF8")]),e._v(".")])])]),e._v(" "),t("li",[t("code",[e._v("pg_ctl -D /var/lib/postgres/data -l logfile start")]),e._v(" lance le serveur.")])]),e._v(" "),t("h2",{attrs:{id:"utilisation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#utilisation"}},[e._v("#")]),e._v(" Utilisation")]),e._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"http://www.postgresqltutorial.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tutoriels"),t("OutboundLink")],1)])]),e._v(" "),t("ul",[t("li",[e._v("Lancer le shell\n"),t("ol",[t("li",[t("code",[e._v("sudo -iu postgres")]),e._v(" lance le shell.")]),e._v(" "),t("li",[t("code",[e._v("psql [nomBaseDeDonnées]")]),e._v(" lance "),t("code",[e._v("psql")]),e._v(" [et sélectionne une base de données].\n"),t("ul",[t("li",[t("code",[e._v("psql -d nomBaseDeDonnées -U nomUtilisateur -W")]),e._v(" se connecte à une base de données avec un utilisateur particulier.")])])])])]),e._v(" "),t("li",[t("code",[e._v("SELECT version();")]),e._v(" affiche la version de postgresql.")]),e._v(" "),t("li",[t("code",[e._v("\\?")]),e._v(" affiche les commandes de "),t("code",[e._v("psql")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("\\h nomCommande")]),e._v(" affiche de l'aide sur une commande.")]),e._v(" "),t("li",[t("code",[e._v("\\g")]),e._v(" répète la commande précédente.")]),e._v(" "),t("li",[t("code",[e._v("\\i filename")]),e._v(" exécute les commandes d'un fichier.")]),e._v(" "),t("li",[t("code",[e._v("\\e")]),e._v(" ouvre l'éditeur de texte par défaut pour entrer une commande qui sera exécuté à la fermeture de l'éditeur.")]),e._v(" "),t("li",[t("code",[e._v("\\q")]),e._v(" quitte "),t("code",[e._v("psql")]),e._v(".")]),e._v(" "),t("li",[e._v("Utilisateurs\n"),t("ul",[t("li",[t("code",[e._v("\\du")]),e._v(" affiche les utilisateurs et leurs rôles")]),e._v(" "),t("li",[e._v("déconnecte les utilisateurs de la base de données sélectionnée :"),t("div",{staticClass:"language-SQL extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" pg_terminate_backend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("pg_stat_activity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" pg_stat_activity\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" datname "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" current_database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("AND")]),e._v(" pid "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<>")]),e._v(" pg_backend_pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])])])]),e._v(" "),t("li",[e._v("Bases de données\n"),t("ul",[t("li",[t("code",[e._v("createdb nomBaseDeDonnées")]),e._v(" créé une base de données.")]),e._v(" "),t("li",[t("code",[e._v("dropdb nomBaseDeDonnées")]),e._v(" supprime une base de données.")]),e._v(" "),t("li",[t("code",[e._v("\\c nomBaseDeDonnées [nomUtilisateur]")]),e._v(" sélectionne une base de données [avec un utilisateur spécifique].")]),e._v(" "),t("li",[t("code",[e._v("\\l")]),e._v(" liste les bases de données disponibles.")]),e._v(" "),t("li",[e._v("Export/Import de bases de données :\n"),t("ul",[t("li",[t("a",{attrs:{href:"https://www.postgresql.org/docs/9.1/backup-dump.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("Exporter une base de données :\n"),t("ol",[t("li",[e._v("Sortir du shell")]),e._v(" "),t("li",[t("code",[e._v("pg_dump nomBaseDeDonnées > nomFichierACréer")])])])]),e._v(" "),t("li",[e._v("Importer une base de données :\n"),t("ul",[t("li",[t("code",[e._v("psql dbname < nomFichierCrééPar_pg_dump")])])])])])])])]),e._v(" "),t("li",[e._v("Schémas\n"),t("ul",[t("li",[t("code",[e._v("\\dn")]),e._v(" liste les schémas existants.")])])]),e._v(" "),t("li",[e._v("Tables\n"),t("ul",[t("li",[t("code",[e._v("\\dt")]),e._v(" affiche les tables. Equivaut à :"),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v("\n    pg_catalog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("pg_tables\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v("\n    schemaname "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'pg_catalog'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("AND")]),e._v(" schemaname "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'information_schema'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])]),e._v(" "),t("li",[t("code",[e._v("\\d nomTable")]),e._v(" ou "),t("code",[e._v("\\d+ nomTable")]),e._v(" affiche les infos d'une table (correspond à "),t("code",[e._v("DESCRIBE nomTable;")]),e._v(" de MySQL). Equivaut à :"),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v("\n    COLUMN_NAME\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v("\n    information_schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("COLUMNS")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v("\n    TABLE_NAME "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'nomTable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])])])]),e._v(" "),t("li",[e._v("Fonctions\n"),t("ul",[t("li",[t("code",[e._v("\\df")]),e._v(" liste les fonctions disponibles.")])])]),e._v(" "),t("li",[e._v("Types custom\n"),t("ul",[t("li",[t("code",[e._v("DROP TYPE nom_type cascade;")]),e._v(" supprime le type.")]),e._v(" "),t("li",[t("code",[e._v("CREATE TYPE nom_énumération AS ENUM ('valeur1', 'valeur2', 'valeur3');")]),e._v(" créé une nouvelle énumération.")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);